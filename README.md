# WP-Guardian

`wplace.live` の特定領域を監視し、手元の画像との差分をリアルタイムで表示するためのデスクトップアプリケーションです。

## 概要

このアプリケーションは、`wplace.live` から指定された座標のタイル画像を定期的に取得し、あらかじめ用意した「オリジナル画像」と比較します。2つの画像の間に差異がある場合、その部分をハイライトした「差分画像」を生成し、変更の割合（差分率）と共に表示します。

これにより、監視対象領域の変化を視覚的に、かつ定量的に追跡することが可能です。

## 主な機能

*   **リアルタイム画像取得:** `wplace.live` からタイル画像を自動で取得・結合します。
*   **差分表示:** 「オリジナル画像」と「リアルタイム画像」を比較し、異なるピクセルを可視化します。
*   **差分率計算:** オリジナル画像のうち、どれくらいの割合のピクセルが変更されたかをパーセンテージで表示します。
*   **GUIによる操作:**
    *   オリジナル、リアルタイム、差分画像の表示/非表示切り替え。
    *   監視対象の座標（タイル座標、ピクセル座標）の指定。
    *   比較元となるオリジナル画像ファイルの選択。
*   **設定の永続化:** 座標や画像パス、ウィンドウの表示状態などの設定は `app_settings.ini` ファイルに自動で保存され、次回起動時に復元されます。

## ビルド方法

### 1. 依存ライブラリの準備

このプロジェクトは `vcpkg` を使用して依存関係を管理しています。以下のライブラリをインストールしてください。

*   `glfw3`
*   `opencv`
*   `opengl`
*   `glew`
*   `cpr`

```bash
vcpkg install glfw3 opencv opengl glew cpr
```

### 2. vcpkg toolchain の設定

`CMakeLists.txt` 内の以下の行を、ご自身の `vcpkg` ディレクトリにある `vcpkg.cmake` ファイルへのパスに書き換えてください。

```cmake
set(CMAKE_TOOLCHAIN_FILE "Your vcpkg directory" CACHE STRING "")
```

例:
```cmake
set(CMAKE_TOOLCHAIN_FILE "C:/dev/vcpkg/scripts/buildsystems/vcpkg.cmake" CACHE STRING "")
```

### 3. ビルド

`CMake` を使用してプロジェクトをビルドします。

```bash
mkdir build
cd build
cmake .. -G "Visual Studio 17 2022" -A x64
cmake --build . --config Release
```

ビルドが成功すると、`build/Release` ディレクトリ内に `WP_Guardian.exe` が生成されます。

## 使い方

1.  `WP_Guardian.exe` を起動します。
2.  **[設定]** ウィンドウで、比較元となる「オリジナル画像」のパスを指定します。
3.  同じく **[設定]** ウィンドウで、`wplace.live` 上で監視したい領域の座標（タイル座標とピクセル座標）を入力します。
4.  **[更新]** ボタンを押すと、設定が適用され、リアルタイム画像の取得と差分比較が開始されます。
5.  メインメニューの **[ウィンドウ]** から、各画像（オリジナル、リアルタイム、差分）や情報ウィンドウの表示/非表示を切り替えることができます。

## ライセンス

このプロジェクトは [LICENSE](LICENSE) の下で公開されています。
